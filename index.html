<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>ibonarium :: JWST slow modes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;background:#000;color:#cfefff;font-family:Inter,system-ui,monospace;overflow:hidden;}

#jwst-bg{position:fixed;inset:0;background-size:cover;background-position:center;opacity:0;transition:opacity 2s ease, filter .8s ease;}

.ir{filter:brightness(0.85)contrast(1.2)saturate(1.4)hue-rotate(35deg);}

#overlay{position:fixed;inset:0;background:radial-gradient(circle at center,rgba(0,0,0,0.25),#000 80%);pointer-events:none;}

#controls{position:absolute;top:16px;left:16px;display:flex;gap:8px;}
button{background:rgba(0,0,0,0.45);border:1px solid rgba(255,255,255,0.15);color:#cfefff;padding:6px 10px;border-radius:10px;cursor:pointer;font-size:13px;}
button.active{border-color:#fff;color:#fff;}

#panel{position:absolute;bottom:16px;left:16px;background:rgba(0,0,0,0.45);backdrop-filter:blur(6px);padding:12px 16px;border-radius:12px;font-size:14px;line-height:1.5;max-width:420px;}
</style>
</head>

<body>

<div id="jwst-bg"></div>
<div id="overlay"></div>

<div id="controls">
    <button onclick="setMode('silence')">Тиша</button>
    <button onclick="setMode('memory')">Памʼять</button>
    <button onclick="setMode('novelty')">Новизна</button>
    <button onclick="toggleIR()">IR</button>
</div>

<div id="panel">
    <b>JWST Slow Observer</b><br>
    Режим: <span id="modeText"></span><br>
    <span id="meta"></span>
</div>

<script>
let mode="memory", ir=false;
const modes = {
  silence: {count:1},
  memory: {count:6},
  novelty: {count:6}
};

function setMode(m){
    mode=m;
    document.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
    event.target.classList.add('active');
    loadImages();
}

function toggleIR(){
  ir=!ir;
  document.getElementById('jwst-bg').classList.toggle('ir',ir);
}

async function loadImages(){
  document.getElementById('modeText').textContent = mode;
  const res = await fetch("https://yuval-harpaz.github.io/astro/jwst_latest_release.json");
  const all = await res.json();

  let pick;
  if(mode==="silence"){
    pick = all[0];
  } else {
    const list = all.slice(0, modes[mode].count);
    pick = list[Math.floor(Math.random()*list.length)];
  }

  show(pick);
}

function show(item){
  const bg = document.getElementById("jwst-bg");
  bg.style.backgroundImage = `url(${item.img})`;
  bg.style.opacity="1";
  document.getElementById("meta").innerHTML=
    `Назва: ${item.title}<br>Інструмент: ${item.instrument}<br>Дата: ${item.date}`;
}

loadImages();
</script>

</body>
</html>
